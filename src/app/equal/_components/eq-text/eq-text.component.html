<div
    #eqText
    class="eq-text"
    (click)="activate()"
    [class.cursor]="mode === 'edit' && !disabled"
>
  <span #text class="text" [class]="size" *ngIf="mode == 'view' && !is_null">
      <span>{{ formControl.value }}</span>
  </span>
    <mat-form-field
        *ngIf="mode == 'edit'"
        [class.disabled]="disabled || !is_active"
        appearance="outline"
    >
        <mat-label *ngIf="title && mode === 'edit'">{{ title }}</mat-label>
        <textarea #textarea
                  [readonly]="disabled"
                  matInput
                  [matTextareaAutosize]="autoGrow"
                  [matAutosizeMaxRows]="9999"
                  [matAutosizeMinRows]="1"
                  [class]="size"
                  [style.padding-right.px]="is_active ? 40 : 0"
                  [class.is_null]="is_null"
                  [disabled]="disabled"
                  [formControl]="formControl"
                  [placeholder]="mode === 'edit' ? placeholder: ''"
                  (blur)="onBlur($event);"
        ></textarea>
        <button
            class="suffix-button"
            *ngIf="is_active && formControl.value.length && !is_null"
            mat-icon-button
            (click)="onClear($event)"
        >
            <mat-icon>close</mat-icon>
        </button>
        <button
            class="suffix-button"
            *ngIf="nullable && (is_active && !formControl.value.length && !is_null)"
            color="accent"
            mat-icon-button
            (click)="toggleIsNull(true)"
        >
            <mat-icon>toggle_off</mat-icon>
        </button>
        <button
            class="suffix-button"
            *ngIf="nullable && (is_active && is_null)"
            mat-icon-button
            (click)="toggleIsNull(false)"
        >
            <mat-icon>toggle_on</mat-icon>
        </button>
        <mat-hint *ngIf="!formControl.invalid && mode == 'edit'" [title]="hint">{{ hint }}</mat-hint>
        <mat-error *ngIf="formControl.invalid">{{ getErrorMessage() }}</mat-error>
    </mat-form-field>

    <button
        mat-icon-button
        color="primary"
        [disabled]="formControl.invalid"
        *ngIf="is_active"
        (click)="onSave($event); setTextHeight()"
    >
        <mat-icon>check_small</mat-icon>
    </button>
    <button
        mat-icon-button
        color="accent"
        *ngIf="is_active"
        (click)="onCancel($event); setTextHeight()"
    >
        <mat-icon>cancel</mat-icon>
    </button>
</div>
