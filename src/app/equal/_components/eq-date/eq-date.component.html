<div
  #eqDate
  class="eq-date"
  (click)="activate()"
  [class.cursor]="mode == 'edit' && !disabled"
  [style.padding-right.px]="is_active ? 0 : 80"
>
    <span class="text" [class]="size" *ngIf="mode == 'view' && !is_null">
            <span>{{ formControl.value }}</span>
    </span>
  <mat-form-field *ngIf="mode == 'edit'" [class.disabled]="disabled" appearance="outline">
    <mat-label *ngIf="title && mode == 'edit'">{{ title }}</mat-label>

    <input
      *ngIf="!is_null"
      #input
      matInput
      [matDatepicker]="datePicker"
      [disabled]="disabled"
      [formControl]="formControl"
      [placeholder]="mode == 'edit' ? placeholder: ''"
      (blur)="onBlur($event)"
    >
    <input
      #nullableInput
      *ngIf="is_null"
      matInput
      [class.is_null]="is_null"
      [disabled]="disabled"
      [formControl]="formControl"
      [placeholder]="mode == 'edit' ? placeholder: ''"
    >

    <mat-hint *ngIf="!formControl.invalid" [title]="hint">{{ hint }}</mat-hint>

    <mat-datepicker-toggle [style.visibility]="is_active ? 'visible' : 'hidden'" matSuffix
                           [for]="datePicker"></mat-datepicker-toggle>
    <button
      *ngIf="is_active && !is_null && inputValue !== undefined && inputValue.length > 0"
      mat-icon-button
      matSuffix
      (click)="onClear($event)"
    >
      <mat-icon>close</mat-icon>
    </button>
    <button
      *ngIf="nullable && !is_null && !inputValue?.length"
      color="accent"
      mat-icon-button
      matSuffix
      (click)="toggleIsNull(true)"
    >
      <mat-icon>toggle_off</mat-icon>
    </button>
    <button
      *ngIf="nullable && is_null && !inputValue?.length"
      mat-icon-button
      matSuffix
      (click)="toggleIsNull(false)"
    >
      <mat-icon>toggle_on</mat-icon>
    </button>
    <mat-datepicker #datePicker></mat-datepicker>
    <mat-error *ngIf="formControl.invalid">{{ getErrorMessage() }}</mat-error>
  </mat-form-field>
  <button
    mat-icon-button
    class="action"
    color="primary"
    *ngIf="is_active"
    [disabled]="formControl.invalid || nullableInput && ![null, '[null]'].includes(nullableInput.nativeElement.value)"
    (click)="onSave($event)"
  >
    <mat-icon>check_small</mat-icon>
  </button>
  <button
    mat-icon-button
    class="action"
    color="accent"
    *ngIf="is_active"
    (click)="onCancel($event)"
  >
    <mat-icon>cancel</mat-icon>
  </button>
</div>

<dl>
  <dt>Value</dt>
  <dd>{{value}}</dd>

  <dt>Form Control</dt>
  <dd>{{formControl.value}}</dd>
</dl>
